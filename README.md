## 서버통신을 활용한 원격 스마트 팜
라즈베리파이(스마트 팜)와 안드로이드 앱(스마트 팜 제어)로 구성된 스마트 팜 관리 프로그램  


## 개발 기간
23.03.21 ~ 23.6.20  


## 개발환경, 개발 언어
스마트팜-Raspbian, Python  
안드로이드 앱-Android Studio, Java  


## 프로그램 구성  
### 라즈베리파이(스마트 팜)  

#### 1. Camera.py  
-라즈베리파이에 부착된 PiCamera를 이용하여 1초 간격으로 찍은 스마트 팜 내부 이미지를 지속적으로 Firebase Storage에 upload한다.  

#### 2. Check.py  
-Firebase에서 구성한 실시간 데이터베이스의 Check의 값을 읽어 라즈베리파이가 인터넷에 연결되어 있는지 확인한다.  
-Check값을 읽은 경우 라즈베리파이의 GPIO 18번을 True로 설정하여 핀과 연결된 LED의 불이 켜진다.  
-Check값을 읽지 못한 경우 GPIO 18번을 False로 하여 LED의 불이 꺼진다.  

#### 3. InTempHum.py  
-DHT22을 GPIO 2번과 연결한다.  
-일정 시간 간격으로 센서가 읽은 내부의 온도, 습도 값을 Firebase의 실시간 데이터베이스에 갱신한다.  
-Firebase에 새로운 작물 환경 데이터가 입력되면 스마트 팜이 유지해야 하는 최저온도, 최고온도, 최고습도를 텍스트파일에 저장한다.  
-사용자가 수동으로 디바이스를 제어하는 경우 입력 값에 따라  핀5번과 6번에 연결되어있는 LED바와 환기 팬을 작동시킨다.  
-수동제어상태가 아니거나 인터넷 연결이 끊긴 경우 센서가 읽은 값에 따라 텍스트파일의 값과 비교하여 LED바와 환기 팬을 자동으로 제어한다.  

#### 4. OutTempHum.py  
-DHT11을 GPIO 4번과 연결한다.  
-일정 시간 간격으로 센서가 읽은 외부의 온도, 습도 값을 Firebase의 실시간 데이터베이스에 갱신한다.  

#### 5. SoilMos.py  
-토양 수분 센서와 GPIO 13번을 연결한다.  
-라즈베리파이는 아날로그 값을 읽지 못하므로 A/D Converter인 MCP3008칩을 이용하여 디지털 신호로 바꾸어 전송한다.  
-수분이 많을수록 0값에 가까워지고 수분이 적을수록 1023값에 가까운 값을 출력하므로 이를 퍼센트로 변경하여 실시간 파이어베이스에 갱신한다.  
-실시간 데이터베이스에 새로운 토양수분 정보가 입력된 경우 해당 값을 텍스트 파일에 저장한다.  
-사용자가 수동으로 워터펌프를 제어하는 경우 입력값에 따라 GPIO 13과 연결되어있는 워터펌프를 3초간 작동시킨다.  
-수동제어상태가 아니거나 인터넷 연결이 끊긴 경우 센서가 읽은 값에 따라 텍스트파일의 값과 비교하여 워터펌프를 3초각 작동시킨다.

### 안드로이드 앱
#### 메인화면  
-키우고자 하는 작물을 선택하여 해당 작물 정보를 표시한다.  
-현재 스마트 팜의 외부, 내부의 온습도와 현재 토양수분을 표시한다.  
-장치 제어 버튼을 눌러 수동제어 화면으로 이동한다.  

#### 등록화면 
-작물 데이터베이스에 있는 각 작물의 환경정보가 표시된다.  
-엽채류, 과채류, 허브 3가지 종류의 버튼을 누르면 각 종류에 맞는 작물 리스트가 표시된다.  
-사용자가 작물을 선택하면 해당 작물 정보를 수정할 수 있는 창이 나오고 필요한 경우 값의 수정이 가능하다.  
-작물을 등록하게 되면 해당 작물 정보가 실시간 데이터베이스에 갱신되어 스마트 팜이 유지되어야 할 환경 정보를 저장하게된다.  
-작물이 등록된 경우 메인화면의 톱니모양의 설정버튼을 눌러 값을 새로 수정하거나 등록된 작물을 삭제할 수 있다.  

#### 제어화면
-내부 카메라로 찍은 이미지가 화면에 나타나여 현재 작물 상태를 확인할 수 있다.  
-장치 제어버튼을 누르면 수동으로 각 디바이스를 제어할 수 있다.  
-각 디바이스 ON, OFF버튼를 누를시 해당 정보가 실시간 파이어베이스로 전송되어 스마트 팜이 값에 맞는 디바이스를 조작하게된다.  
